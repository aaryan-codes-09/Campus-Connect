{% extends 'base.html' %}
{% block title %}Achievements ‚Äì CampusConnect{% endblock %}
{% block page_title %}Student Achievements{% endblock %}
{% block content %}
<div class="page-header d-flex justify-content-between flex-wrap gap-3">
  <div><div class="page-header-title"><i class="fas fa-trophy me-2 text-amber"></i>Student Achievements</div><div class="page-header-sub">Celebrating excellence at ISBM College</div></div>
  {% if current_user %}<a href="/achievements/add" class="btn btn-amber"><i class="fas fa-plus me-2"></i>Add Achievement</a>{% endif %}
</div>
<div class="page-content" style="padding-top:0">
  <div class="d-flex flex-wrap gap-2 mb-4">
    <a href="/achievements" class="badge-pill {{ 'badge-teal' if not dept_filter else 'badge-muted' }}" style="cursor:pointer;font-size:.8rem;padding:.35rem .8rem">All Departments</a>
    {% for d in depts %}<a href="/achievements?dept={{ d.name|urlencode }}" class="badge-pill {{ 'badge-amber' if dept_filter==d.name else 'badge-muted' }}" style="cursor:pointer;font-size:.8rem;padding:.35rem .8rem">{{ d.code }}</a>{% endfor %}
  </div>
  <div class="row g-3">
    {% for a in achs %}
    <div class="col-md-6 col-lg-4">
      <div class="card h-100">
        {% if a.certificate_image %}<img src="/static/uploads/events/{{ a.certificate_image }}" style="width:100%;height:140px;object-fit:cover;border-radius:14px 14px 0 0">{% else %}
        <div style="background:linear-gradient(135deg,#2d1a00,#a06020);height:100px;border-radius:14px 14px 0 0;display:flex;align-items:center;justify-content:center;font-size:2rem;opacity:.7">üèÜ</div>{% endif %}
        <div class="card-body">
          <div style="display:flex;justify-content:space-between;margin-bottom:6px">
            <span class="badge-pill badge-amber" style="font-size:.68rem">{{ a.achievement_type|title }}</span>
            <span style="font-size:.75rem;color:var(--c-muted)">{{ a.date or '' }}</span>
          </div>
          <div style="font-weight:700;font-size:.9rem;margin-bottom:4px">{{ a.title }}</div>
          {% if a.description %}<div style="color:var(--c-muted);font-size:.8rem;line-height:1.5;margin-bottom:8px">{{ a.description[:80] }}...</div>{% endif %}
          <div style="display:flex;align-items:center;gap:8px;margin-top:auto">
            <div class="avatar avatar-teal" style="width:24px;height:24px;font-size:.65rem">{{ (a.student_name or 'S')[0] }}</div>
            <span style="font-size:.8rem;font-weight:500">{{ a.student_name }}</span>
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <div class="col-12" style="padding:48px;text-align:center;color:var(--c-muted)"><i class="fas fa-trophy" style="font-size:2.5rem;opacity:.25;margin-bottom:12px;display:block"></i><h5>No achievements found.</h5></div>
    {% endfor %}
  </div>
</div>
{% endblock %}
