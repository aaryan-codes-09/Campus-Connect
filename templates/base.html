<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}CampusConnect ‚Äì ISBM CoE, Pune{% endblock %}</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
:root {
  --c-bg:       #0b1220;
  --c-surface:  #121d2f;
  --c-card:     #1a2740;
  --c-border:   #1e3050;
  --c-teal:     #00c8a0;
  --c-teal-dim: #00a580;
  --c-amber:    #ffb830;
  --c-amber-dim:#e09800;
  --c-coral:    #ff6b6b;
  --c-purple:   #a78bfa;
  --c-blue:     #60a5fa;
  --c-text:     #e2eaf6;
  --c-muted:    #7a95b8;
  --c-line:     rgba(255,255,255,.07);
  --r:          14px;
  --r-sm:       9px;
  --shadow:     0 4px 24px rgba(0,0,0,.35);
  --shadow-lg:  0 8px 40px rgba(0,0,0,.5);
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--c-bg);color:var(--c-text);font-family:'Plus Jakarta Sans',sans-serif;min-height:100vh;overflow-x:hidden}
h1,h2,h3,h4,h5,h6{font-family:'Space Grotesk',sans-serif;color:var(--c-text)}
a{color:var(--c-teal);text-decoration:none}
a:hover{color:var(--c-teal-dim)}
hr{border-color:var(--c-line)}
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:var(--c-bg)}
::-webkit-scrollbar-thumb{background:var(--c-border);border-radius:3px}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.page-wrapper{display:flex;min-height:100vh}
.sidebar{width:240px;background:var(--c-surface);border-right:1px solid var(--c-border);display:flex;flex-direction:column;position:fixed;top:0;left:0;height:100vh;z-index:100;transition:transform .3s}
.main-content{margin-left:240px;flex:1;display:flex;flex-direction:column;min-height:100vh}
.main-content.no-sidebar{margin-left:0}
@media(max-width:900px){.sidebar{transform:translateX(-100%)}.sidebar.open{transform:none}.main-content{margin-left:0}}

/* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
.sidebar-logo{padding:22px 20px 16px;border-bottom:1px solid var(--c-border)}
.logo-mark{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--c-teal),#0089a0);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.1rem;color:#fff;flex-shrink:0}
.logo-text{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:1rem;color:#fff;line-height:1.1}
.logo-sub{font-size:.67rem;color:var(--c-muted);font-weight:400;margin-top:2px}
.sidebar-user{padding:14px 16px;border-bottom:1px solid var(--c-border);display:flex;align-items:center;gap:10px}
.avatar{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.95rem;flex-shrink:0}
.avatar-teal{background:linear-gradient(135deg,var(--c-teal),#0089a0);color:#fff}
.avatar-amber{background:linear-gradient(135deg,var(--c-amber),var(--c-amber-dim));color:#111}
.avatar-coral{background:linear-gradient(135deg,var(--c-coral),#cc4444);color:#fff}
.avatar-purple{background:linear-gradient(135deg,var(--c-purple),#7c3aed);color:#fff}
.user-name{font-weight:600;font-size:.82rem;color:var(--c-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.user-role{font-size:.7rem;color:var(--c-muted)}
.sidebar-nav{padding:12px 10px;flex:1;overflow-y:auto}
.nav-section{font-size:.67rem;font-weight:700;letter-spacing:1.2px;color:var(--c-muted);padding:8px 10px 4px;text-transform:uppercase}
.nav-item{display:flex;align-items:center;gap:10px;padding:9px 12px;border-radius:var(--r-sm);color:var(--c-muted);font-size:.85rem;font-weight:500;margin-bottom:2px;transition:all .2s;cursor:pointer;white-space:nowrap}
.nav-item:hover{background:var(--c-card);color:var(--c-text)}
.nav-item.active{background:linear-gradient(90deg,rgba(0,200,160,.15),rgba(0,200,160,.05));color:var(--c-teal);border-left:3px solid var(--c-teal)}
.nav-item i{width:18px;text-align:center;font-size:.85rem;flex-shrink:0}
.nav-badge{margin-left:auto;background:var(--c-teal);color:#000;font-size:.63rem;font-weight:700;padding:1px 6px;border-radius:20px}
.sidebar-bottom{padding:12px 10px;border-top:1px solid var(--c-border)}

/* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
.topbar{background:var(--c-surface);border-bottom:1px solid var(--c-border);padding:0 24px;height:60px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:50}
.topbar-left{display:flex;align-items:center;gap:12px}
.topbar-title{font-family:'Space Grotesk',sans-serif;font-weight:600;font-size:1rem;color:var(--c-text)}
.topbar-right{display:flex;align-items:center;gap:8px}
.btn-icon{width:36px;height:36px;border-radius:var(--r-sm);background:var(--c-card);border:1px solid var(--c-border);display:flex;align-items:center;justify-content:center;color:var(--c-muted);transition:all .2s;cursor:pointer}
.btn-icon:hover{background:var(--c-border);color:var(--c-text)}
.hamburger{display:none}
@media(max-width:900px){.hamburger{display:flex}}

/* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
.card{background:var(--c-card);border:1px solid var(--c-border);border-radius:var(--r);box-shadow:var(--shadow)}
.card-header{background:transparent;border-bottom:1px solid var(--c-border);padding:14px 18px;display:flex;align-items:center;justify-content:space-between}
.card-header-title{font-family:'Space Grotesk',sans-serif;font-weight:600;font-size:.9rem;color:var(--c-text);display:flex;align-items:center;gap:8px}
.card-header-title i{color:var(--c-teal)}
.card-body{padding:16px 18px}

/* ‚îÄ‚îÄ STAT CARDS ‚îÄ‚îÄ */
.stat-card{background:var(--c-card);border:1px solid var(--c-border);border-radius:var(--r);padding:18px 20px;display:flex;align-items:center;gap:14px;transition:transform .2s,box-shadow .2s}
.stat-card:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg)}
.stat-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}
.stat-icon-teal{background:rgba(0,200,160,.15);color:var(--c-teal)}
.stat-icon-amber{background:rgba(255,184,48,.15);color:var(--c-amber)}
.stat-icon-coral{background:rgba(255,107,107,.15);color:var(--c-coral)}
.stat-icon-purple{background:rgba(167,139,250,.15);color:var(--c-purple)}
.stat-icon-blue{background:rgba(96,165,250,.15);color:var(--c-blue)}
.stat-num{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:1.7rem;line-height:1;color:var(--c-text)}
.stat-label{font-size:.78rem;color:var(--c-muted);margin-top:2px}

/* ‚îÄ‚îÄ BADGES ‚îÄ‚îÄ */
.badge-pill{padding:.28rem .7rem;border-radius:20px;font-size:.72rem;font-weight:600;letter-spacing:.2px}
.badge-teal{background:rgba(0,200,160,.15);color:var(--c-teal);border:1px solid rgba(0,200,160,.3)}
.badge-amber{background:rgba(255,184,48,.15);color:var(--c-amber);border:1px solid rgba(255,184,48,.3)}
.badge-coral{background:rgba(255,107,107,.15);color:var(--c-coral);border:1px solid rgba(255,107,107,.3)}
.badge-purple{background:rgba(167,139,250,.15);color:var(--c-purple);border:1px solid rgba(167,139,250,.3)}
.badge-blue{background:rgba(96,165,250,.15);color:var(--c-blue);border:1px solid rgba(96,165,250,.3)}
.badge-muted{background:rgba(122,149,184,.12);color:var(--c-muted);border:1px solid rgba(122,149,184,.2)}

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn{border-radius:var(--r-sm);font-weight:600;font-size:.85rem;padding:.45rem 1.1rem;transition:all .2s;border:none}
.btn-teal{background:var(--c-teal);color:#000}
.btn-teal:hover{background:var(--c-teal-dim);color:#000}
.btn-amber{background:var(--c-amber);color:#000}
.btn-amber:hover{background:var(--c-amber-dim);color:#000}
.btn-ghost{background:transparent;color:var(--c-muted);border:1px solid var(--c-border)}
.btn-ghost:hover{background:var(--c-card);color:var(--c-text)}
.btn-danger-soft{background:rgba(255,107,107,.15);color:var(--c-coral);border:1px solid rgba(255,107,107,.3)}
.btn-danger-soft:hover{background:rgba(255,107,107,.25);color:var(--c-coral)}
.btn-success-soft{background:rgba(0,200,160,.12);color:var(--c-teal);border:1px solid rgba(0,200,160,.25)}
.btn-success-soft:hover{background:rgba(0,200,160,.2);color:var(--c-teal)}
.btn-sm{padding:.3rem .75rem;font-size:.78rem}
.btn-lg{padding:.65rem 1.6rem;font-size:.95rem}

/* ‚îÄ‚îÄ FORMS ‚îÄ‚îÄ */
.form-label{font-size:.8rem;font-weight:600;color:var(--c-muted);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.4px}
.form-control,.form-select{background:var(--c-surface);border:1.5px solid var(--c-border);color:var(--c-text);border-radius:var(--r-sm);padding:.55rem .85rem;font-size:.88rem;font-family:'Plus Jakarta Sans',sans-serif;transition:border-color .2s,box-shadow .2s}
.form-control:focus,.form-select:focus{background:var(--c-surface);border-color:var(--c-teal);box-shadow:0 0 0 3px rgba(0,200,160,.12);color:var(--c-text);outline:none}
.form-control::placeholder{color:var(--c-muted)}
.form-select option{background:var(--c-surface)}
.input-group-text{background:var(--c-card);border:1.5px solid var(--c-border);color:var(--c-muted)}

/* ‚îÄ‚îÄ TABLES ‚îÄ‚îÄ */
.table{--bs-table-bg:transparent;--bs-table-color:var(--c-text);--bs-table-border-color:var(--c-border);font-size:.85rem}
.table thead th{background:var(--c-surface);color:var(--c-muted);font-size:.72rem;text-transform:uppercase;letter-spacing:.6px;font-weight:600;border:none;padding:10px 14px}
.table tbody td{border-color:var(--c-border);padding:10px 14px;vertical-align:middle}
.table tbody tr:hover{background:rgba(255,255,255,.03)}

/* ‚îÄ‚îÄ ALERTS ‚îÄ‚îÄ */
.alert{border-radius:var(--r);border:none;font-size:.85rem;padding:.75rem 1rem}
.alert-success{background:rgba(0,200,160,.12);color:var(--c-teal);border:1px solid rgba(0,200,160,.25)}
.alert-danger{background:rgba(255,107,107,.12);color:var(--c-coral);border:1px solid rgba(255,107,107,.25)}
.alert-warning{background:rgba(255,184,48,.12);color:var(--c-amber);border:1px solid rgba(255,184,48,.25)}
.alert-info{background:rgba(96,165,250,.12);color:var(--c-blue);border:1px solid rgba(96,165,250,.25)}
.alert-dismissible .btn-close{filter:invert(1);opacity:.5}

/* ‚îÄ‚îÄ PAGE HEADER ‚îÄ‚îÄ */
.page-header{padding:28px 28px 20px}
.page-header-title{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:1.5rem;color:var(--c-text);margin-bottom:4px}
.page-header-sub{color:var(--c-muted);font-size:.85rem}
.page-header-actions{display:flex;align-items:center;gap:8px;flex-wrap:wrap}

/* ‚îÄ‚îÄ EVENT CARDS ‚îÄ‚îÄ */
.event-card{background:var(--c-card);border:1px solid var(--c-border);border-radius:var(--r);overflow:hidden;transition:transform .2s,box-shadow .2s}
.event-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.event-card-img{height:160px;object-fit:cover;width:100%}
.event-card-placeholder{height:160px;display:flex;align-items:center;justify-content:center;font-size:2.5rem}
.event-card-body{padding:14px 16px}
.event-card-meta{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;font-size:.75rem;color:var(--c-muted)}
.event-card-meta span{display:flex;align-items:center;gap:4px}

/* ‚îÄ‚îÄ QR DISPLAY ‚îÄ‚îÄ */
.qr-container{background:white;border-radius:var(--r);padding:20px;display:inline-block;box-shadow:var(--shadow-lg)}
.qr-token{font-family:'Space Grotesk',sans-serif;font-size:2rem;font-weight:800;letter-spacing:4px;color:var(--c-teal);background:rgba(0,200,160,.08);border:2px dashed rgba(0,200,160,.3);border-radius:10px;padding:10px 20px;text-align:center}

/* ‚îÄ‚îÄ TIMETABLE ‚îÄ‚îÄ */
.tt-cell{background:var(--c-card);border:1px solid var(--c-border);border-radius:8px;padding:8px 10px;min-height:60px}
.tt-subject{font-weight:600;font-size:.8rem;color:var(--c-text)}
.tt-meta{font-size:.7rem;color:var(--c-muted);margin-top:3px}
.tt-empty{background:transparent;border:1px dashed var(--c-border);border-radius:8px;min-height:60px}
.tt-header{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--c-muted);padding:6px 8px}

/* ‚îÄ‚îÄ NOTICE ITEM ‚îÄ‚îÄ */
.notice-item{background:var(--c-card);border:1px solid var(--c-border);border-radius:var(--r);padding:14px 16px;border-left:3px solid var(--c-border);transition:border-color .2s}
.notice-item.important{border-left-color:var(--c-coral)}
.notice-item.academic{border-left-color:var(--c-teal)}
.notice-item.placement{border-left-color:var(--c-amber)}
.notice-item-title{font-weight:600;font-size:.9rem;color:var(--c-text)}
.notice-item-meta{font-size:.75rem;color:var(--c-muted);margin-top:4px;display:flex;gap:12px;flex-wrap:wrap}

/* ‚îÄ‚îÄ MEMORY GALLERY ‚îÄ‚îÄ */
.memory-grid{columns:4 200px;column-gap:10px}
.memory-item{break-inside:avoid;margin-bottom:10px;border-radius:10px;overflow:hidden;position:relative;cursor:pointer}
.memory-item img{width:100%;display:block;border-radius:10px;transition:transform .4s}
.memory-item:hover img{transform:scale(1.06)}
.memory-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,transparent 55%);opacity:0;transition:opacity .3s;border-radius:10px;display:flex;flex-direction:column;justify-content:flex-end;padding:12px;color:white}
.memory-item:hover .memory-overlay{opacity:1}

/* ‚îÄ‚îÄ ATTENDANCE LIVE ‚îÄ‚îÄ */
.att-pulse{width:10px;height:10px;border-radius:50%;background:var(--c-teal);animation:pulse 1.5s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,200,160,.4)}50%{box-shadow:0 0 0 6px rgba(0,200,160,0)}}

/* ‚îÄ‚îÄ MISC ‚îÄ‚îÄ */
.divider{height:1px;background:var(--c-border);margin:12px 0}
.text-teal{color:var(--c-teal)!important}
.text-amber{color:var(--c-amber)!important}
.text-coral{color:var(--c-coral)!important}
.text-muted-cc{color:var(--c-muted)!important}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--c-muted)}
.rounded-cc{border-radius:var(--r)}
.gradient-teal{background:linear-gradient(135deg,var(--c-teal),#0089a0)}
.hero-gradient{background:linear-gradient(135deg,var(--c-surface) 0%,#0d2035 50%,#0b2a3a 100%);border-bottom:1px solid var(--c-border)}
.page-content{padding:0 28px 32px}
@media(max-width:768px){.page-content{padding:0 14px 24px}.page-header{padding:18px 14px 12px}}
</style>
{% block extra_css %}{% endblock %}
</head>
<body>
<div class="page-wrapper">

{% if current_user %}
<!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo d-flex align-items-center gap-10" style="gap:10px">
    <div class="logo-mark">CC</div>
    <div><div class="logo-text">CampusConnect</div><div class="logo-sub">ISBM CoE, Pune</div></div>
  </div>

  <div class="sidebar-user">
    <div class="avatar {% if current_user.role=='teacher' %}avatar-amber{% elif current_user.role=='organizer' %}avatar-coral{% elif current_user.role=='admin' %}avatar-purple{% else %}avatar-teal{% endif %}">
      {{ current_user.full_name[0].upper() }}
    </div>
    <div style="overflow:hidden">
      <div class="user-name">{{ current_user.full_name }}</div>
      <div class="user-role">
        <i class="fas fa-circle" style="font-size:.4rem;color:var(--c-teal)"></i>
        {{ current_user.role|title }}{% if current_user.department %} ¬∑ {{ (current_user.department or '')[:12] }}{% endif %}
      </div>
    </div>
  </div>

  <nav class="sidebar-nav">
    <div class="nav-section">Main</div>
    <a href="/dashboard" class="nav-item {% if request.path=='/dashboard' %}active{% endif %}"><i class="fas fa-th-large"></i> Dashboard</a>
    <a href="/events" class="nav-item {% if '/events' in request.path %}active{% endif %}"><i class="fas fa-calendar-star"></i> Events</a>
    <a href="/memories" class="nav-item {% if '/memories' in request.path %}active{% endif %}"><i class="fas fa-images"></i> Memories</a>
    <a href="/notices" class="nav-item {% if '/notices' in request.path %}active{% endif %}"><i class="fas fa-bell"></i> Notices</a>

    {% if current_user.role == 'student' %}
    <div class="nav-section">Academics</div>
    <a href="/timetable" class="nav-item {% if '/timetable' in request.path %}active{% endif %}"><i class="fas fa-clock"></i> Timetable</a>
    <a href="/attendance" class="nav-item {% if '/attendance' in request.path %}active{% endif %}"><i class="fas fa-qrcode"></i> My Attendance</a>
    <a href="/achievements" class="nav-item {% if '/achievements' in request.path %}active{% endif %}"><i class="fas fa-trophy"></i> Achievements</a>
    <a href="/departments" class="nav-item {% if '/departments' in request.path %}active{% endif %}"><i class="fas fa-building"></i> Departments</a>
    {% endif %}

    {% if current_user.role == 'teacher' %}
    <div class="nav-section">Teaching</div>
    <a href="/attendance" class="nav-item {% if '/attendance' in request.path and '/mark' not in request.path %}active{% endif %}"><i class="fas fa-qrcode"></i> QR Attendance</a>
    <a href="/attendance/create" class="nav-item {% if '/attendance/create' in request.path %}active{% endif %}"><i class="fas fa-plus-circle"></i> New Session</a>
    <a href="/timetable" class="nav-item {% if '/timetable' in request.path %}active{% endif %}"><i class="fas fa-clock"></i> Timetable</a>
    <a href="/timetable/manage" class="nav-item {% if '/timetable/manage' in request.path %}active{% endif %}"><i class="fas fa-edit"></i> Manage Timetable</a>
    <a href="/notices/create" class="nav-item"><i class="fas fa-bullhorn"></i> Post Notice</a>
    {% endif %}

    {% if current_user.role == 'organizer' %}
    <div class="nav-section">Organize</div>
    <a href="/events/create" class="nav-item"><i class="fas fa-plus-circle"></i> Create Event</a>
    <a href="/memories/upload" class="nav-item"><i class="fas fa-upload"></i> Upload Memories</a>
    <a href="/notices/create" class="nav-item"><i class="fas fa-bullhorn"></i> Post Notice</a>
    {% endif %}

    {% if current_user.role == 'admin' %}
    <div class="nav-section">Admin</div>
    <a href="/admin/users" class="nav-item {% if '/admin/users' in request.path %}active{% endif %}"><i class="fas fa-users-cog"></i> Manage Users</a>
    <a href="/admin/add-user" class="nav-item"><i class="fas fa-user-plus"></i> Add User</a>
    <a href="/timetable/manage" class="nav-item"><i class="fas fa-edit"></i> Timetable</a>
    <a href="/events/create" class="nav-item"><i class="fas fa-calendar-plus"></i> Create Event</a>
    <a href="/memories/upload" class="nav-item"><i class="fas fa-upload"></i> Upload Memories</a>
    <a href="/notices/create" class="nav-item"><i class="fas fa-bullhorn"></i> Post Notice</a>
    {% endif %}

    <div class="nav-section">Community</div>
    <a href="/departments" class="nav-item {% if '/departments' in request.path %}active{% endif %}"><i class="fas fa-building"></i> Departments</a>
    <a href="/achievements" class="nav-item {% if '/achievements' in request.path %}active{% endif %}"><i class="fas fa-trophy"></i> Achievements</a>
  </nav>

  <div class="sidebar-bottom">
    <a href="/profile" class="nav-item"><i class="fas fa-user-circle"></i> My Profile</a>
    <a href="/logout" class="nav-item" style="color:var(--c-coral)"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>
</aside>
{% endif %}

<!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
<div class="main-content {% if not current_user %}no-sidebar{% endif %}" id="mainContent">

  {% if current_user %}
  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-left">
      <button class="btn-icon hamburger" id="menuBtn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
      <span class="topbar-title">{% block page_title %}Dashboard{% endblock %}</span>
    </div>
    <div class="topbar-right">
      <a href="/notices" class="btn-icon" title="Notices"><i class="fas fa-bell" style="font-size:.85rem"></i></a>
      <a href="/profile" class="btn-icon" title="Profile">
        <div class="avatar {% if current_user.role=='teacher' %}avatar-amber{% elif current_user.role=='organizer' %}avatar-coral{% elif current_user.role=='admin' %}avatar-purple{% else %}avatar-teal{% endif %}" style="width:28px;height:28px;font-size:.75rem">{{ current_user.full_name[0].upper() }}</div>
      </a>
    </div>
  </header>
  {% else %}
  <!-- Public Navbar -->
  <nav style="background:var(--c-surface);border-bottom:1px solid var(--c-border);padding:.7rem 0;position:sticky;top:0;z-index:100">
    <div class="container-fluid px-4 d-flex align-items-center justify-content-between">
      <a href="/" class="d-flex align-items-center gap-2 text-decoration-none" style="gap:10px">
        <div class="logo-mark" style="width:36px;height:36px;font-size:.95rem">CC</div>
        <div><div style="font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:.95rem;color:white">CampusConnect</div><div style="font-size:.62rem;color:var(--c-muted)">ISBM CoE, Pune</div></div>
      </a>
      <div class="d-flex align-items-center gap-2">
        <a href="/events" class="btn btn-ghost btn-sm d-none d-md-flex">Events</a>
        <a href="/memories" class="btn btn-ghost btn-sm d-none d-md-flex">Memories</a>
        <a href="/departments" class="btn btn-ghost btn-sm d-none d-md-flex">Departments</a>
        <a href="/login" class="btn btn-ghost btn-sm">Login</a>
        <a href="/register" class="btn btn-teal btn-sm">Register</a>
      </div>
    </div>
  </nav>
  {% endif %}

  <!-- Flash messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}{% if messages %}
  <div style="padding:12px 28px 0">
    {% for cat, msg in messages %}
    <div class="alert alert-{{ 'success' if cat=='success' else 'danger' if cat=='danger' else 'warning' if cat=='warning' else 'info' }} alert-dismissible fade show" role="alert">
      <i class="fas fa-{{ 'check-circle' if cat=='success' else 'exclamation-circle' if cat=='danger' else 'info-circle' }} me-2"></i>{{ msg }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
  </div>
  {% endif %}{% endwith %}

  {% block content %}{% endblock %}

  {% if not current_user %}
  <!-- Public Footer -->
  <footer style="background:var(--c-surface);border-top:1px solid var(--c-border);padding:40px 0 20px;margin-top:auto">
    <div class="container-fluid px-4">
      <div class="row g-4">
        <div class="col-md-4">
          <div class="d-flex align-items-center gap-2 mb-3" style="gap:10px"><div class="logo-mark" style="width:32px;height:32px;font-size:.85rem">CC</div><span style="font-family:'Space Grotesk',sans-serif;font-weight:700;color:white">CampusConnect</span></div>
          <p style="color:var(--c-muted);font-size:.82rem;line-height:1.6">ISBM College of Engineering, Pune. S.No. 9/1, Nande Village, Pashan-Sus Road, Pune 412115</p>
        </div>
        <div class="col-md-2"><div class="section-label mb-3">Links</div>{% for l in [('Events','/events'),('Memories','/memories'),('Departments','/departments'),('Achievements','/achievements')] %}<a href="{{ l[1] }}" style="display:block;color:var(--c-muted);font-size:.82rem;margin-bottom:.3rem">{{ l[0] }}</a>{% endfor %}</div>
        <div class="col-md-3"><div class="section-label mb-3">Departments</div>{% for d in ['CE','IT','ENTC','ME','Civil','AIDS'] %}<span style="display:inline-block;color:var(--c-muted);font-size:.8rem;margin-right:.5rem;margin-bottom:.3rem">{{ d }}</span>{% endfor %}</div>
        <div class="col-md-3"><div class="section-label mb-3">Contact</div><p style="color:var(--c-muted);font-size:.8rem">üìû +91 20 2293 3445<br>‚úâÔ∏è info@isbm.edu.in<br>üåê isbm.edu.in</p></div>
      </div>
      <div style="border-top:1px solid var(--c-border);margin-top:24px;padding-top:16px;text-align:center;color:var(--c-muted);font-size:.78rem">
        ¬© 2025 CampusConnect ‚Äì ISBM College of Engineering, Pune. Built with Python Flask.
      </div>
    </div>
  </footer>
  {% endif %}
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script>
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('open');
}
// Close sidebar on outside click on mobile
document.addEventListener('click', function(e){
  const sb = document.getElementById('sidebar');
  const btn = document.getElementById('menuBtn');
  if(window.innerWidth < 900 && sb && !sb.contains(e.target) && btn && !btn.contains(e.target)){
    sb.classList.remove('open');
  }
});
</script>
{% block extra_js %}{% endblock %}
</body>
</html>
